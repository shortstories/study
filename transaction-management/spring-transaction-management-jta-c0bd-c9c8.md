# Spring with JTA 삽질

## JTA?

Java Transaction API의 약자. 각 플랫폼별 트랜잭션 매니저의 인터페이스를 정의한 것. 당연히 여러 구현체들을 가지고 있다. 일반적으로는 웹서버에 딸려있는걸 쓰거나 별도로 서버를 구축해서 쓰는데, 내 경우에는 그정도 규모까진 아직 필요가 없어서 embedded JTA로 찾아보게 되었다. 그에 따라 선택한 것이 atomikos 이다. 우선 오픈소스이고, 개발 기간도 비교적 오래되었으며, 스프링 문서에서도 언급되고 있는 부분이 마음에 들었다.

## XA?

eXtended Architecture의 약자. 하나의 같은 global 트랜잭션에서 다른 여러 데이터 저장소들에 접근하기 위한 표준이다. XA는 트랜잭션 매니저의 여러가지 기능을 제어한다. 하나는 우선 트랜잭션의 일부로 어떤 작업이 진행되고 있는지 데이터베이스에게 알리는 기능이고, 다른 것은 각 트랜잭션이 종료될 때 2PC (2-phase commit) 프로토콜을 수행하는 기능이다. 또한 데이터 저장소에서 보류 중인 트랜잭션을 복구하는 기능도 제공한다.

